////////////////////////////////////////////////////////////////////////////////////////////////////
// C MeatAxe - Identity matrix
////////////////////////////////////////////////////////////////////////////////////////////////////

#include "meataxe.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
// Local data


/// @addtogroup mat
/// @{

////////////////////////////////////////////////////////////////////////////////////////////////////

/// Returns a new identity matrix.
///
/// @param fl Field order.
/// @param nor Number of rows (= number of columns).

Matrix_t* matId(int fl, uint32_t nor)
{
   if (fl < 2)
      mtxAbort(MTX_HERE, "matId(%d,%lu): %s", fl, (unsigned long)nor, MTX_ERR_BADARG);

   Matrix_t* m = matAlloc(fl, nor, nor);
   PTR x = m->data;
   for (uint32_t i = 0; i < nor; ++i) {
      ffInsert(x, i, FF_ONE);
      ffStepPtr(&x, nor);
   }

   return m;
}


/// @}

// vim:fileencoding=utf8:sw=3:ts=8:et:cin
